{% extends "base.html" %}

{% block title %}Gabby{% endblock %}


{% block additionalstyles %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles-chatbot.css') }}">
{% endblock %}


{% block content %}

<body>

    
    
    <div class="instructions-container h-100 d-flex flex-column">
        <!-- Adding pulsing circle below -->
        <div class="pulsing-circle" id="pulsingCircle"></div>
        <!-- End of pulsing circle -->
        <br>
        <br>
        


        <div id="instructions" class="text-center mb-4">
            
            <p>To converse with Gabby the Caregiver, click the "Start Chat" button.</p>
            <ul>
                <li>When the circle turns <span style="color: red;"><strong>Red</strong></span>, Gabby is speaking.</li>
                <li>When the circle turns <span style="color: green;"><strong>Green</strong></span>, Gabby is actively listening. Speak freely and she'll respond once you're finished.</li>
            </ul>
        </div>
        
        <div class="row flex-grow-1 justify-content-center align-items-center">
            <!-- Chatbot and User Text -->
            <div class="col-12 text-center mb-5">
                <div id="userText" class="alert alert-primary" role="alert" style="display:none;"></div>
                <div id="botText" class="alert alert-secondary" role="alert" style="display:none;"></div>
            </div>

            <div class="d-flex justify-content-center align-items-center vh-20">
                <p id="result"></p>
            </div>
        </div>

        <!-- Buttons -->
        <div class="row justify-content-center" style="margin-top: -15vh; margin-bottom: 25vh;">
            <div class="col-12 text-center">
                
                <button id="startButton" class="btn btn-success mr-2" onclick="startRecording()" disabled>Start Chat</button> 
                <button id="stopButton" class="btn btn-danger mr-2" onclick="stopRecording()" disabled>End Chat</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/microsoft-cognitiveservices-speech-sdk@latest/distrib/browser/microsoft.cognitiveservices.speech.sdk.bundle-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js" integrity="sha512-zoJXRvW2gC8Z0Xo3lBbao5+AS3g6YWr5ztKqaicua11xHo+AvE1b0lT9ODgrHTmNUxeCw0Ry4BGRYZfXu70weg==" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

</body>
{% endblock %}
